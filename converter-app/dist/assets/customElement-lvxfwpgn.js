import{L as T,c as r,s as f,E as l,x as i,i as I,a as y}from"./index-CU2XrwSA.js";import{n as D}from"./ref-BAXvaCG9.js";import{i as n}from"./keyed-BoKhxUVy.js";import{u as P,I as B}from"./interactive-DbJ6DVso.js";import{d as H}from"./floating-ui-CKTsGjvP.js";import{u as O}from"./useT9n-DbDa2RXM.js";import{u as C}from"./useSetFocus-DcOiktJc.js";import"./directive-helpers-iS6uTh5u.js";import"./dom-D1OgeJVN.js";import"./guid-LcV_DAvu.js";import"./debounce-D0Dr7phT.js";import"./index-C6pSFIZO.js";import"./component-D8buMxM-.js";import"./logger-CBb2N99p.js";const b={handle:"handle",dropdown:"dropdown"},g={drag:"drag",blank:"blank"},h={label:"{label}",position:"{position}",total:"{total}"},$=["top","up","down","bottom"],E={trigger:"trigger"},m={add:"add",move:"move",reorder:"reorder"},R=I`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex}.dropdown{block-size:100%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}:host([hidden]){display:none}[hidden]{display:none}`,d=class d extends T{constructor(){super(...arguments),this.focusSetter=C()(this),this.disabled=!1,this.messages=O({blocking:!0}),this.addToItems=[],this.moveToItems=[],this.open=!1,this.overlayPositioning="absolute",this.placement=H,this.scale="m",this.sortDisabled=!1,this.calciteSortHandleBeforeClose=r({cancelable:!1}),this.calciteSortHandleBeforeOpen=r({cancelable:!1}),this.calciteSortHandleClose=r({cancelable:!1}),this.calciteSortHandleMove=r({cancelable:!0}),this.calciteSortHandleAdd=r({cancelable:!0}),this.calciteSortHandleOpen=r({cancelable:!1}),this.calciteSortHandleReorder=r({cancelable:!0})}get hasSetInfo(){return typeof this.setPosition=="number"&&typeof this.setSize=="number"}get hasValidSetInfo(){return this.hasSetInfo?this.setPosition>0&&this.setSize>1:!0}get hasReorderItems(){return!this.sortDisabled&&this.hasValidSetInfo}get hasNoItems(){return!this.hasReorderItems&&this.moveToItems.length<1&&this.addToItems.length<1}async setFocus(e){return this.focusSetter(()=>this.dropdownEl,e)}willUpdate(e){e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openHandler()}updated(){P(this)}openHandler(){if(this.disabled){this.open=!1;return}this.dropdownEl&&(this.dropdownEl.open=this.open)}setDropdownEl(e){e&&(this.dropdownEl=e,this.openHandler())}getLabel(){const{label:e,messages:t,setPosition:o,setSize:s,hasSetInfo:c}=this;if(!c)return e??"";let a=e?t.repositionLabel.replace(h.label,e):t.reposition;return a=a.replace(h.position,o?o.toString():""),a.replace(h.total,s?s.toString():"")}handleBeforeOpen(e){e.stopPropagation(),this.calciteSortHandleBeforeOpen.emit()}handleOpen(e){e.stopPropagation(),this.calciteSortHandleOpen.emit(),this.open=!0}handleBeforeClose(e){e.stopPropagation(),this.calciteSortHandleBeforeClose.emit()}handleClose(e){e.stopPropagation(),this.calciteSortHandleClose.emit(),this.open=!1}handleReorder(e){this.calciteSortHandleReorder.emit({reorder:e.target.dataset.value})}handleMoveTo(e){const t=e.target.dataset.id,o=this.moveToItems.find(s=>s.id===t);this.calciteSortHandleMove.emit({moveTo:o})}handleAddTo(e){const t=e.target.dataset.id,o=this.addToItems.find(s=>s.id===t);this.calciteSortHandleAdd.emit({addTo:o})}render(){const{disabled:e,flipPlacements:t,open:o,overlayPositioning:s,placement:c,scale:a,widthScale:w,hasNoItems:S}=this,p=this.getLabel(),v=e||S;return B({disabled:e,children:i`<calcite-dropdown class=${f(b.dropdown)} .disabled=${v} .flipPlacements=${t} @calciteDropdownBeforeClose=${this.handleBeforeClose} @calciteDropdownBeforeOpen=${this.handleBeforeOpen} @calciteDropdownClose=${this.handleClose} @calciteDropdownOpen=${this.handleOpen} .overlayPositioning=${s} .placement=${c} .scale=${a} .widthScale=${w} ${D(this.setDropdownEl)}><calcite-action .active=${o} appearance=transparent .aria=${{expanded:o}} class=${f(b.handle)} .dragHandle=${!0} .icon=${e?g.blank:g.drag} .label=${p} .scale=${a} slot=${E.trigger} .text=${p} title=${p??l}></calcite-action>${this.renderReorderGroup()}${this.renderMoveToGroup()}${this.renderAddToGroup()}</calcite-dropdown>`})}renderAddToItem(e){return n(e.id,i`<calcite-dropdown-item data-id=${e.id??l} .label=${e.label} @calciteDropdownItemSelect=${this.handleAddTo}>${e.label}</calcite-dropdown-item>`)}renderMoveToItem(e){return n(e.id,i`<calcite-dropdown-item data-id=${e.id??l} .label=${e.label} @calciteDropdownItemSelect=${this.handleMoveTo}>${e.label}</calcite-dropdown-item>`)}renderReorderGroup(){return this.hasReorderItems?n("reorder",i`<calcite-dropdown-group .groupTitle=${this.messages.reorder} id=${m.reorder} .scale=${this.scale} selection-mode=none>${this.renderTop()}${this.renderUp()}${this.renderDown()}${this.renderBottom()}</calcite-dropdown-group>`):null}renderAddToGroup(){const{messages:e,addToItems:t,scale:o}=this;return t.length?n("add-to-items",i`<calcite-dropdown-group .groupTitle=${e.addTo} id=${m.add} .scale=${o} selection-mode=none>${t.map(s=>this.renderAddToItem(s))}</calcite-dropdown-group>`):null}renderMoveToGroup(){const{messages:e,moveToItems:t,scale:o}=this;return t.length?n("move-to-items",i`<calcite-dropdown-group .groupTitle=${e.moveTo} id=${m.move} .scale=${o} selection-mode=none>${t.map(s=>this.renderMoveToItem(s))}</calcite-dropdown-group>`):null}renderDropdownItem(e,t){return n($[e],i`<calcite-dropdown-item data-value=${$[e]??l} .label=${t} @calciteDropdownItemSelect=${this.handleReorder}>${t}</calcite-dropdown-item>`)}renderTop(){const{setPosition:e}=this;return e!==1&&e!==2?this.renderDropdownItem(0,this.messages.moveToTop):null}renderUp(){return this.setPosition!==1?this.renderDropdownItem(1,this.messages.moveUp):null}renderDown(){return this.setPosition!==this.setSize?this.renderDropdownItem(2,this.messages.moveDown):null}renderBottom(){const{setPosition:e,setSize:t}=this;return e!==t&&e!==t-1?this.renderDropdownItem(3,this.messages.moveToBottom):null}};d.properties={disabled:[7,{},{reflect:!0,type:Boolean}],flipPlacements:[0,{},{attribute:!1}],label:1,messageOverrides:[0,{},{attribute:!1}],messages:[0,{},{attribute:!1}],addToItems:[0,{},{attribute:!1}],moveToItems:[0,{},{attribute:!1}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],placement:[3,{},{reflect:!0}],scale:[3,{},{reflect:!0}],setPosition:[9,{},{type:Number}],setSize:[9,{},{type:Number}],sortDisabled:[7,{},{reflect:!0,type:Boolean}],widthScale:[3,{},{reflect:!0}]},d.styles=R;let u=d;y("calcite-sort-handle",u);export{u as SortHandle};

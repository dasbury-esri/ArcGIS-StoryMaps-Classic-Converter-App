import{L as N,c as d,b as K,s,E as a,x as c,i as j,a as G}from"./index-CU2XrwSA.js";import{e as J,n as l}from"./ref-BAXvaCG9.js";import{c as Q,d as W,s as X,H as Y}from"./form-CBixd2lZ.js";import{u as Z,I as _}from"./interactive-DbJ6DVso.js";import{c as ee,d as ie,g as te}from"./label-C5fMiZ4h.js";import{d as m}from"./math-OZMpPBUT.js";import{g as ae}from"./component-D8buMxM-.js";import{I as se}from"./InternalLabel-T4GW-fC7.js";import{V as re}from"./Validation-0Yt7OEI9.js";import{g as ne}from"./dom-D1OgeJVN.js";import{s as oe}from"./input-Caci4YeM.js";import{u as ce}from"./useT9n-DbDa2RXM.js";import{i as h}from"./locale-DV4UNTZT.js";import{u as le}from"./useSetFocus-DcOiktJc.js";import{u as de}from"./useTime-DCURdTHa.js";import"./directive-helpers-iS6uTh5u.js";import"./logger-CBb2N99p.js";import"./guid-LcV_DAvu.js";import"./index-C6pSFIZO.js";import"./key-Cyh_1epf.js";import"./text-CtmPHnHs.js";const pe=j`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:inline-block}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}::slotted(input[slot=hidden-form-input]){margin:0!important;opacity:0!important;outline:none!important;padding:0!important;position:absolute!important;inset:0!important;transform:none!important;-webkit-appearance:none!important;z-index:-1!important}calcite-time-picker{--calcite-time-picker-color: var(--calcite-input-time-picker-digit-text-color);--calcite-time-picker-icon-color: var(--calcite-input-time-picker-digit-icon-color);--calcite-time-picker-border-color: var(--calcite-input-time-picker-border-color);--calcite-time-picker-button-background-color-hover: var(--calcite-input-time-picker-action-background-color-hover);--calcite-time-picker-button-background-color-press: var(--calcite-input-time-picker-action-background-color-press);--calcite-time-picker-input-border-color-hover: var(--calcite-input-time-picker-digit-border-color-hover);--calcite-time-picker-input-border-color-press: var(--calcite-input-time-picker-digit-border-color-press)}.container{--calcite-icon-color: var(--calcite-input-time-picker-icon-color, var(--calcite-color-text-3));align-items:center;background-color:var(--calcite-input-time-picker-input-background-color, var(--calcite-color-foreground-1));border:1px solid var(--calcite-input-time-picker-input-border-color, var(--calcite-color-border-input));border-radius:var(--calcite-input-time-picker-input-corner-radius, var(--calcite-corner-radius-none));box-shadow:var(--calcite-input-time-picker-input-shadow, var(--calcite-shadow-none));box-sizing:border-box;display:flex;color:var(--calcite-input-time-picker-input-text-color, var(--calcite-color-text-1));flex-wrap:nowrap;font-weight:var(--calcite-font-weight-normal);inline-size:100%;padding-block:var(--calcite-spacing-base);-webkit-user-select:none;user-select:none}.container:focus-within{border-color:var(--calcite-color-brand);outline:var(--calcite-border-width-md) solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline:var(--calcite-border-width-md) solid var(--calcite-internal-color-focus);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}.container.read-only{background-color:var(--calcite-color-background);font-weight:var(--calcite-font-weight-medium)}.input-container{display:flex;flex-grow:1}.input{align-items:center;display:flex;block-size:100%;justify-content:center;min-inline-size:max-content}.input.empty{inline-size:var(--calcite-spacing-xl)}.input:focus,.input:hover:focus{background-color:Highlight;color:HighlightText;outline:2px solid transparent;outline-offset:2px}.toggle-icon{align-items:center;block-size:24px;cursor:pointer;display:flex;inline-size:24px;justify-content:center}.toggle-icon:hover{--calcite-icon-color: var(--calcite-input-time-picker-icon-color-hover)}.meridiem--start{margin-inline-end:var(--calcite-spacing-xxs)}.meridiem--end{margin-inline-start:var(--calcite-spacing-xxs)}:host([scale=s]) .container{block-size:1.5rem;font-size:var(--calcite-font-size-sm);gap:var(--calcite-spacing-sm);padding-inline-start:var(--calcite-spacing-sm);padding-inline-end:var(--calcite-spacing-xxs)}:host([scale=s]) .input-container{line-height:1rem}:host([scale=m]) .container{block-size:2rem;font-size:var(--calcite-font-size);gap:var(--calcite-spacing-md);padding-inline-start:var(--calcite-spacing-md);padding-inline-end:var(--calcite-spacing-sm)}:host([scale=m]) .input-container{line-height:1.5rem}:host([scale=l]) .container{block-size:2.75rem;font-size:var(--calcite-font-size-md);gap:var(--calcite-spacing-lg);padding-inline:var(--calcite-spacing-lg)}:host([scale=l]) .input-container{line-height:2.25rem}:host([status=invalid]) .container{border-color:var(--calcite-color-status-danger)}:host([status=invalid]) .container:focus-within{outline:var(--calcite-border-width-md) solid var(--calcite-color-status-danger);outline-offset:calc(calc(-1 * var(--calcite-spacing-base)) * calc(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}calcite-time-picker{--calcite-time-picker-background-color: var(--calcite-input-time-picker-background-color);--calcite-time-picker-border-color: var(--calcite-input-time-picker-border-color, transparent);--calcite-time-picker-corner-radius: var( --calcite-input-time-picker-corner-radius, var(--calcite-corner-radius-round) )}calcite-popover{--calcite-popover-corner-radius: var(--calcite-input-time-picker-corner-radius, var(--calcite-corner-radius-round))}.internal-label-alignment--center{align-items:center}.internal-label-alignment--end{align-items:end}.internal-label--container{display:flex;justify-content:space-between;color:var(--calcite-color-text-1)}.internal-label-required--indicator{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-status-danger);padding-inline:var(--calcite-spacing-base)}.internal-label-required--indicator:hover{cursor:help}.internal-label--text{line-height:1}:host([scale=s]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-xxs)}:host([scale=s]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label--text{font-size:var(--calcite-font-size--2)}:host([scale=m]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label--text{font-size:var(--calcite-font-size--1)}:host([scale=l]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=l]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-md)}:host([scale=l]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-md)}:host([scale=l]) .internal-label--text{font-size:var(--calcite-font-size-0)}.validation-container{display:flex;flex-direction:column;align-items:flex-start;align-self:stretch}:host([scale=m]) .validation-container,:host([scale=l]) .validation-container{padding-block-start:.5rem}:host([scale=s]) .validation-container{padding-block-start:.25rem}:host([hidden]){display:none}[hidden]{display:none}`,i={clockIcon:"clock-icon",container:"container",decimalSeparator:"decimal-separator",empty:"empty",fractionalSecond:"fractional-second",hour:"hour",hourSuffix:"hour-suffix",input:"input",inputContainer:"input-container",meridiem:"meridiem",meridiemStart:"meridiem--start",meridiemEnd:"meridiem--end",minute:"minute",minuteSuffix:"minute-suffix",readOnly:"read-only",second:"second",secondSuffix:"second-suffix",toggleIcon:"toggle-icon"},f={inputContainer:"inputContainer",validationMessage:"inputTimePickerValidationMessage"},w={clock:"clock",chevronUp:"chevron-up",chevronDown:"chevron-down"},p=class p extends N{constructor(){super(),this.messages=ce(),this.containerRef=J(),this.focusSetter=le()(this),this.time=de(this),this.disabled=!1,this.focusTrapDisabled=!1,this.hourFormat="user",this.open=!1,this.overlayPositioning="absolute",this.placement="auto",this.readOnly=!1,this.required=!1,this.scale="m",this.status="idle",this.step=60,this.validity={valid:!1,badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1},this.calciteInputTimePickerBeforeClose=d({cancelable:!1}),this.calciteInputTimePickerBeforeOpen=d({cancelable:!1}),this.calciteInputTimePickerChange=d(),this.calciteInputTimePickerClose=d({cancelable:!1}),this.calciteInputTimePickerOpen=d({cancelable:!1}),this.listen("blur",this.blurHandler),this.listen("keydown",this.keyDownHandler),this.listen("calciteTimeChange",this.timeChangeHandler)}async reposition(e=!1){this.popoverEl?.reposition(e)}async setFocus(e){return this.focusSetter(()=>this.el,e)}connectedCallback(){super.connectedCallback(),ee(this),Q(this)}willUpdate(e){e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openHandler(),e.has("disabled")&&(this.hasUpdated||this.disabled!==!1)&&(this.disabled||(this.open=!1)),e.has("readOnly")&&(this.hasUpdated||this.readOnly!==!1)&&(this.readOnly||(this.open=!1)),e.has("value")&&(this.hasUpdated?(this.time.userChangedValue||(this.previousEmittedValue=this.value),this.time.setValue(this.value)):this.previousEmittedValue=this.value)}updated(){Z(this)}disconnectedCallback(){super.disconnectedCallback(),ie(this),W(this)}blurHandler(){this.changeEventHandler()}changeEventHandler(){const{previousEmittedValue:e,value:r}=this;e!==r&&(this.calciteInputTimePickerChange.emit().defaultPrevented?this.time.setValue(this.previousEmittedValue):this.previousEmittedValue=r)}keyDownHandler(e){const{defaultPrevented:r,key:t}=e,{hourFormat:n,meridiemOrder:o}=this.time;if(!r)if(t==="Enter")X(this)&&e.preventDefault(),this.changeEventHandler();else if(this.open&&this.focusTrapDisabled&&t==="Escape")this.open=!1,e.preventDefault();else{const v=m(this.step)>0,g=this.step<60;switch(this.activeEl){case this.hourEl:t==="ArrowRight"?this.setFocusPart("minute"):t==="ArrowLeft"&&n==="12"&&o===0&&this.setFocusPart("meridiem");break;case this.minuteEl:switch(t){case"ArrowLeft":this.setFocusPart("hour");break;case"ArrowRight":this.step!==60?this.setFocusPart("second"):n==="12"&&this.setFocusPart("meridiem");break}break;case this.secondEl:switch(t){case"ArrowLeft":this.setFocusPart("minute");break;case"ArrowRight":m(this.step)>0?this.setFocusPart("fractionalSecond"):n==="12"&&this.setFocusPart("meridiem");break}break;case this.fractionalSecondEl:switch(t){case"ArrowLeft":this.setFocusPart("second");break;case"ArrowRight":n==="12"&&o!==0&&this.setFocusPart("meridiem");break}break;case this.meridiemEl:t==="ArrowLeft"&&o!==0?v?this.setFocusPart("fractionalSecond"):g?this.setFocusPart("second"):this.setFocusPart("minute"):t==="ArrowRight"&&o===0&&this.setFocusPart("hour");break}}}onLabelClick(){this.setFocus()}openHandler(){this.disabled||this.readOnly||this.popoverEl&&(this.popoverEl.open=this.open)}popoverBeforeOpenHandler(e){e.stopPropagation(),this.calciteInputTimePickerBeforeOpen.emit()}popoverOpenHandler(e){e.stopPropagation(),this.calciteInputTimePickerOpen.emit()}popoverBeforeCloseHandler(e){e.stopPropagation(),this.calciteInputTimePickerBeforeClose.emit()}popoverCloseHandler(e){e.stopPropagation(),this.calciteInputTimePickerClose.emit(),this.open=!1}setCalcitePopoverEl(e){this.popoverEl=e,this.openHandler()}async setFocusPart(e){this[`${e||"hour"}El`]?.focus()}setFractionalSecondEl(e){this.fractionalSecondEl=e}setHourEl(e){this.hourEl=e}setMinuteEl(e){this.minuteEl=e}setSecondEl(e){this.secondEl=e}setMeridiemEl(e){this.meridiemEl=e}syncHiddenFormInput(e){oe("time",this,e)}timeChangeHandler(e){if(e.stopPropagation(),this.disabled)return;const r=e.detail;r!==this.value&&(this.value=r)}timePartFocusHandler(e){this.activeEl=e.currentTarget}timePickerChangeHandler(e){e.stopPropagation()}toggleIconClickHandler(){this.open=!this.open}render(){const{messages:e,readOnly:r,scale:t}=this,{fractionalSecond:n,handleHourKeyDownEvent:o,handleMinuteKeyDownEvent:v,handleSecondKeyDownEvent:g,handleFractionalSecondKeyDownEvent:T,hour:b,hourFormat:M,localizedDecimalSeparator:D,localizedFractionalSecond:k,localizedHour:P,localizedHourSuffix:B,localizedMinute:S,localizedMinuteSuffix:L,localizedSecond:F,localizedSecondSuffix:H,meridiemOrder:V,minute:$,second:y}=this.time,x="--",A=h(n),R=h(b),q=h($),U=h(y),C=m(this.step)>0,I=M==="12",z=this.step<60,O=V===0||ne(this.el)==="rtl",u=!this.disabled&&!this.readOnly;return _({disabled:this.disabled,children:c`${this.labelText&&se({labelText:this.labelText,onClick:this.onLabelClick,required:this.required,tooltipText:this.messages.required})||""}<div aria-controls=${f.inputContainer} aria-labelledby=${f.inputContainer} class=${s({[i.container]:!0,[i.readOnly]:r})} role=combobox ${l(this.containerRef)}><calcite-icon class=${s(i.clockIcon)} .icon=${w.clock} .scale=${t==="l"?"m":"s"}></calcite-icon><div aria-label=${te(this)??a} .ariaRequired=${this.required} class=${s(i.inputContainer)} dir=ltr id=${f.inputContainer} role=group>${I&&O&&this.renderMeridiem("start")||""}<span aria-label=${this.messages.hour??a} aria-valuemax=23 aria-valuemin=1 aria-valuenow=${R&&parseInt(b)||"0"} aria-valuetext=${b??a} class=${s({[i.empty]:!P,[i.hour]:!0,[i.input]:!0})} @focus=${this.timePartFocusHandler} @keydown=${u?o:void 0} role=spinbutton tabindex=0 ${l(this.setHourEl)}>${P||x}</span><span class=${s(i.hourSuffix)}>${B}</span><span aria-label=${this.messages.minute??a} aria-valuemax=12 aria-valuemin=1 aria-valuenow=${q&&parseInt($)||"0"} aria-valuetext=${$??a} class=${s({[i.empty]:!S,[i.input]:!0,[i.minute]:!0})} @focus=${this.timePartFocusHandler} @keydown=${u?v:void 0} role=spinbutton tabindex=0 ${l(this.setMinuteEl)}>${S||x}</span>${z&&c`<span class=${s(i.minuteSuffix)}>${L}</span>`||""}${z&&c`<span aria-label=${this.messages.second??a} aria-valuemax=59 aria-valuemin=0 aria-valuenow=${U&&parseInt(y)||"0"} aria-valuetext=${y??a} class=${s({[i.empty]:!F,[i.input]:!0,[i.second]:!0})} @focus=${this.timePartFocusHandler} @keydown=${u?g:void 0} role=spinbutton tabindex=0 ${l(this.setSecondEl)}>${F||x}</span>`||""}${C&&c`<span class=${s(i.decimalSeparator)}>${D}</span>`||""}${C&&c`<span aria-label=${this.messages.fractionalSecond??a} aria-valuemax=999 aria-valuemin=1 aria-valuenow=${A&&parseInt(n)||"0"} aria-valuetext=${k??a} class=${s({[i.empty]:!k,[i.fractionalSecond]:!0,[i.input]:!0})} @focus=${this.timePartFocusHandler} @keydown=${u?T:void 0} role=spinbutton tabindex=0 ${l(this.setFractionalSecondEl)}>${k||"".padStart(m(this.step),"-")}</span>`||""}${H&&c`<span class=${s(i.secondSuffix)}>${H}</span>`||""}${I&&!O&&this.renderMeridiem("end")||""}</div>${!this.readOnly&&this.renderToggleIcon(this.open)||""}</div><calcite-popover auto-close .focusTrapDisabled=${this.focusTrapDisabled} .focusTrapOptions=${{initialFocus:!1}} .label=${e.chooseTime} lang=${this.messages._lang??a} offset-distance=0 @calcitePopoverBeforeClose=${this.popoverBeforeCloseHandler} @calcitePopoverBeforeOpen=${this.popoverBeforeOpenHandler} @calcitePopoverClose=${this.popoverCloseHandler} @calcitePopoverOpen=${this.popoverOpenHandler} .overlayPositioning=${this.overlayPositioning} .placement=${this.placement} pointer-disabled .referenceElement=${this.containerRef.value} trigger-disabled ${l(this.setCalcitePopoverEl)}><calcite-time-picker .hourFormat=${this.time.hourFormat} lang=${this.messages._lang??a} .messageOverrides=${this.messageOverrides} .numberingSystem=${this.numberingSystem} @calciteTimePickerChange=${this.timePickerChangeHandler} .scale=${this.scale} .step=${this.step} tabindex=${(this.open?void 0:-1)??a} .time=${this.time} .value=${this.value}></calcite-time-picker></calcite-popover>${Y({component:this})}${this.validationMessage&&this.status==="invalid"?re({icon:this.validationIcon,id:f.validationMessage,message:this.validationMessage,scale:this.scale,status:this.status}):null}`})}renderMeridiem(e){const{handleMeridiemKeyDownEvent:r,localizedMeridiem:t,meridiem:n}=this.time,o=!this.disabled&&!this.readOnly;return c`<span aria-label=${this.messages.meridiem??a} aria-valuemax=2 aria-valuemin=1 aria-valuenow=${n==="PM"&&"2"||"1"} aria-valuetext=${n??a} class=${s({[i.empty]:!t,[i.input]:!0,[i.meridiem]:!0,[i.meridiemStart]:e==="start",[i.meridiemEnd]:e==="end"})} @focus=${this.timePartFocusHandler} @keydown=${o?r:void 0} role=spinbutton tabindex=0 ${l(this.setMeridiemEl)}>${t||"--"}</span>`}renderToggleIcon(e){return c`<span class=${s(i.toggleIcon)} @click=${this.toggleIconClickHandler}><calcite-icon .icon=${e?w.chevronUp:w.chevronDown} .scale=${ae(this.scale)}></calcite-icon></span>`}};p.properties={disabled:[7,{},{reflect:!0,type:Boolean}],focusTrapDisabled:[7,{},{reflect:!0,type:Boolean}],form:[3,{},{reflect:!0}],hourFormat:[3,{},{reflect:!0}],label:1,labelText:1,max:[3,{},{reflect:!0}],messageOverrides:[0,{},{attribute:!1}],min:[3,{},{reflect:!0}],name:1,numberingSystem:[3,{},{reflect:!0}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:1,placement:[3,{},{reflect:!0}],readOnly:[7,{},{reflect:!0,type:Boolean}],required:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],status:[3,{},{reflect:!0}],step:[11,{},{reflect:!0,type:Number}],validationIcon:[3,{converter:K},{reflect:!0}],validationMessage:1,validity:[0,{},{attribute:!1}],value:1},p.shadowRootOptions={mode:"open",delegatesFocus:!0},p.styles=pe;let E=p;G("calcite-input-time-picker",E);export{E as InputTimePicker};

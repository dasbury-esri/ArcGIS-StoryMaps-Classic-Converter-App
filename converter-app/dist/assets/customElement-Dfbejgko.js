import{L as z,c as b,b as E,s,E as u,x as y,i as B,a as L}from"./index-CU2XrwSA.js";import{e as C,n as h}from"./ref-BAXvaCG9.js";import{u as N}from"./useFocusTrap-BSYIXAM5.js";import{d as l,b as w,a as o,l as W,m as F,i as H,o as P}from"./date-BnOS7JKN.js";import{d as M,r as U,c as I,a as q,f as Y,h as _,F as S}from"./floating-ui-CKTsGjvP.js";import{c as j,d as G,s as K,H as Z}from"./form-CBixd2lZ.js";import{u as J,I as Q}from"./interactive-DbJ6DVso.js";import{n as O}from"./key-Cyh_1epf.js";import{c as X,d as ee,g as te}from"./label-C5fMiZ4h.js";import{g as R}from"./component-D8buMxM-.js";import{n as x,c as ae,d as ie,a as ne}from"./locale-DV4UNTZT.js";import{t as re}from"./openCloseComponent-D_0xowAC.js";import{g as $,a as se}from"./utils3-B4HCt8p3.js";import{g as V}from"./guid-LcV_DAvu.js";import{I as ce}from"./InternalLabel-T4GW-fC7.js";import{V as le}from"./Validation-0Yt7OEI9.js";import{s as oe}from"./input-Caci4YeM.js";import{u as de}from"./useT9n-DbDa2RXM.js";import{u as pe}from"./useSetFocus-DcOiktJc.js";import"./directive-helpers-iS6uTh5u.js";import"./index-C6pSFIZO.js";import"./dom-D1OgeJVN.js";import"./debounce-D0Dr7phT.js";import"./logger-CBb2N99p.js";const ue=B`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{--calcite-icon-size: 1rem;--calcite-spacing-eighth: .125rem;--calcite-spacing-quarter: .25rem;--calcite-spacing-half: .5rem;--calcite-spacing-three-quarters: .75rem;--calcite-spacing: 1rem;--calcite-spacing-plus-quarter: 1.25rem;--calcite-spacing-plus-half: 1.5rem;--calcite-spacing-double: 2rem;--calcite-menu-min-width: 10rem;--calcite-header-min-height: 3rem;--calcite-footer-min-height: 3rem}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host .menu-container .calcite-floating-ui-anim{position:relative;transition-duration:var(--calcite-floating-ui-transition);transition-property:inset-block-start,left,opacity,display;transition-behavior:allow-discrete;opacity:0;box-shadow:0 0 16px #00000029;z-index:var(--calcite-z-index);border-radius:.25rem}:host .menu-container[data-placement^=bottom] .calcite-floating-ui-anim{inset-block-start:-5px}:host .menu-container[data-placement^=top] .calcite-floating-ui-anim{inset-block-start:5px}:host .menu-container[data-placement^=left] .calcite-floating-ui-anim{left:5px}:host .menu-container[data-placement^=right] .calcite-floating-ui-anim{left:-5px}:host .menu-container[data-placement] .calcite-floating-ui-anim--active{opacity:1;inset-block-start:0;left:0}@starting-style{:host .menu-container[data-placement] .calcite-floating-ui-anim--active{opacity:0}}:host{position:relative;display:inline-block;width:100%;overflow:visible;vertical-align:top;box-shadow:var(--calcite-input-date-picker-shadow, var(--calcite-shadow-none))}:host .menu-container .calcite-floating-ui-anim{box-shadow:var(--calcite-input-date-picker-calendar-shadow, var(--calcite-shadow-sm))}:host([scale=s]){--calcite-internal-date-picker-toggle-spacing: var(--calcite-spacing-sm);--calcite-internal-input-text-input-padding-inline-end: calc(var(--calcite-internal-date-picker-toggle-spacing) + var(--calcite-spacing-lg))}:host([scale=m]){--calcite-internal-date-picker-toggle-spacing: var(--calcite-spacing-md);--calcite-internal-input-text-input-padding-inline-end: calc(var(--calcite-internal-date-picker-toggle-spacing) + var(--calcite-spacing-xxl))}:host([scale=l]){--calcite-internal-date-picker-toggle-spacing: var(--calcite-spacing-lg);--calcite-internal-input-text-input-padding-inline-end: calc(var(--calcite-internal-date-picker-toggle-spacing) + var(--calcite-spacing-xxxl))}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.calendar-wrapper{box-shadow:var(--calcite-input-date-picker-calendar-shadow, var(--calcite-shadow-none));transform:translateZ(0)}.input-wrapper{position:relative}.input-wrapper .chevron-icon{color:var(--calcite-input-date-picker-actions-icon-color, var(--calcite-color-text-3))}.input-wrapper:focus-within .chevron-icon,.input-wrapper:active .chevron-icon,.input-wrapper:hover .chevron-icon{color:var(--calcite-input-date-picker-actions-icon-color-hover, var(--calcite-color-text-1))}.input-wrapper:focus-within~.input-wrapper .chevron-icon,.input-wrapper:active~.input-wrapper .chevron-icon,.input-wrapper:hover~.input-wrapper .chevron-icon{color:var(--calcite-input-date-picker-actions-icon-color-hover, var(--calcite-color-text-1))}.toggle-icon{position:absolute;display:flex;cursor:pointer;align-items:center;inset-inline-end:0;inset-block:0;padding-inline:var(--calcite-internal-date-picker-toggle-spacing)}:host([range]) .container{display:flex}:host([range]) .input-container{display:flex;flex:1 1 auto}:host([range]) .input-wrapper{flex:1 1 auto}.divider-container{display:flex;align-items:stretch;border-width:1px;border-left-width:0px;border-right-width:0px;border-style:solid;background-color:var(--calcite-input-date-picker-background-color, var(--calcite-color-foreground-1));border-color:var(--calcite-input-date-picker-border-color, var(--calcite-color-border-input))}:host([layout=horizontal]) .divider-container{inline-size:var(--calcite-spacing-px)}.divider{display:inline-block;margin-block:var(--calcite-spacing-xxs);background-color:var(--calcite-input-date-picker-divider-color, var(--calcite-color-border-2));inline-size:var(--calcite-spacing-px)}:host([layout=vertical]) .divider-container{height:1px;width:100%;border-top-width:0px;border-bottom-width:0px;border-left-width:1px;border-right-width:0px;padding-inline:var(--calcite-spacing-md)}:host([layout=vertical]) .divider-container .divider{margin-top:0;margin-bottom:0;height:1px;width:100%}:host([range][layout=vertical]) .input-wrapper{width:100%}:host([range][layout=vertical]) .input-container{flex-direction:column;align-items:flex-start}.menu-container{--calcite-floating-ui-z-index: var(--calcite-z-index-dropdown);inline-size:max-content;display:none;max-inline-size:100vw;max-block-size:100vh;inset-block-start:0;left:0;z-index:var(--calcite-floating-ui-z-index)}@starting-style{.menu-container{opacity:0;inset-block-start:0;left:0}}.menu-container .calcite-floating-ui-anim{position:relative;transition-duration:var(--calcite-floating-ui-transition);transition-property:inset-block-start,left,opacity,display;transition-behavior:allow-discrete;opacity:0;box-shadow:0 0 16px #00000029;z-index:var(--calcite-z-index);border-radius:.25rem}.menu-container[data-placement^=bottom] .calcite-floating-ui-anim{inset-block-start:-5px}.menu-container[data-placement^=top] .calcite-floating-ui-anim{inset-block-start:5px}.menu-container[data-placement^=left] .calcite-floating-ui-anim{left:5px}.menu-container[data-placement^=right] .calcite-floating-ui-anim{left:-5px}.menu-container[data-placement] .calcite-floating-ui-anim--active{opacity:1;inset-block-start:0;left:0}@starting-style{.menu-container[data-placement] .calcite-floating-ui-anim--active{opacity:0}}.input .calcite-input__wrapper{margin-top:0}.vertical-chevron-container{display:flex;align-items:center;border-width:1px;border-left-width:0px;border-style:solid;padding-inline:var(--calcite-spacing-md);background-color:var(--calcite-input-date-picker-background-color, var(--calcite-color-foreground-1));border-color:var(--calcite-input-date-picker-border-color, var(--calcite-color-border-input))}.vertical-chevron-container calcite-icon{color:var(--calcite-input-date-picker-actions-icon-color, var(--calcite-color-text-3))}.vertical-chevron-container calcite-icon:hover{color:var(--calcite-input-date-picker-actions-icon-color-hover, var(--calcite-color-text-1))}:host([range][layout=vertical][scale=s]) .vertical-chevron-container,:host([range][layout=vertical][scale=s]) .divider-container{padding-inline:var(--calcite-spacing-sm)}:host([range][layout=vertical][scale=l]) .vertical-chevron-container,:host([range][layout=vertical][scale=l]) .divider-container{padding-inline:var(--calcite-spacing-lg)}.container:focus-within .vertical-chevron-container calcite-icon,.container:active .vertical-chevron-container calcite-icon,.container:hover .vertical-chevron-container calcite-icon{color:var(--calcite-input-date-picker-actions-icon-color-hover, var(--calcite-color-text-1))}.input{--calcite-input-text-background-color: var(--calcite-input-date-picker-background-color);--calcite-input-text-border-color: var(--calcite-input-date-picker-border-color);--calcite-input-text-corner-radius: var(--calcite-input-date-picker-corner-radius);--calcite-input-text-shadow: var(--calcite-input-date-picker-shadow);--calcite-input-text-icon-color: var(--calcite-input-date-picker-icon-color);--calcite-input-text-text-color: var(--calcite-input-date-picker-text-color);--calcite-input-text-placeholder-text-color: var(--calcite-input-date-picker-placeholder-text-color)}calcite-date-picker{--calcite-date-picker-border-color: var(--calcite-input-date-picker-calendar-border-color);--calcite-date-picker-corner-radius: var(--calcite-input-date-picker-calendar-corner-radius);--calcite-date-picker-range-calendar-divider-color: var(--calcite-input-date-picker-calendar-range-divider-color);--calcite-date-picker-week-header-text-color: var(--calcite-input-date-picker-calendar-text-color);--calcite-date-picker-header-action-background-color: var( --calcite-input-date-picker-calendar-actions-background-color );--calcite-date-picker-header-action-background-color-hover: var( --calcite-input-date-picker-calendar-actions-background-color-hover );--calcite-date-picker-header-action-background-color-press: var( --calcite-input-date-picker-calendar-actions-background-color-press );--calcite-date-picker-header-action-text-color: var(--calcite-input-date-picker-calendar-actions-text-color);--calcite-date-picker-header-action-text-color-press: var( --calcite-input-date-picker-calendar-actions-text-color-press );--calcite-date-picker-year-text-color: var(--calcite-input-date-picker-calendar-text-color);--calcite-date-picker-month-select-text-color: var(--calcite-input-date-picker-calendar-month-select-text-color);--calcite-date-picker-month-select-icon-color: var(--calcite-input-date-picker-calendar-icon-color);--calcite-date-picker-month-select-icon-color-hover: var(--calcite-input-date-picker-calendar-icon-color-hover);--calcite-date-picker-day-background-color: var(--calcite-input-date-picker-calendar-day-background-color);--calcite-date-picker-day-background-color-hover: var( --calcite-input-date-picker-calendar-day-background-color-hover );--calcite-date-picker-day-background-color-selected: var( --calcite-input-date-picker-calendar-selected-background-color );--calcite-date-picker-day-text-color: var(--calcite-input-date-picker-calendar-day-text-color);--calcite-date-picker-day-text-color-hover: var(--calcite-input-date-picker-calendar-day-text-color-hover);--calcite-date-picker-day-text-color-selected: var(--calcite-input-date-picker-calendar-day-text-color-selected);--calcite-date-picker-current-day-text-color: var( --calcite-input-date-picker-calendar-current-day-text-color, var(--calcite-input-date-picker-calendar-day-current-text-color) );--calcite-date-picker-day-range-text-color: var(--calcite-input-date-picker-calendar-day-range-text-color);--calcite-date-picker-day-range-background-color: var(--calcite-input-date-picker-calendar-selected-background-color);--calcite-date-picker-day-outside-range-background-color-hover: var( --calcite-input-date-picker-calendar-day-outside-range-background-color-hover );--calcite-date-picker-day-outside-range-text-color-hover: var( --calcite-input-date-picker-calendar-day-outside-range-text-color-hover )}.validation-container{display:flex;flex-direction:column;align-items:flex-start;align-self:stretch}:host([scale=m]) .validation-container,:host([scale=l]) .validation-container{padding-block-start:.5rem}:host([scale=s]) .validation-container{padding-block-start:.25rem}::slotted(input[slot=hidden-form-input]){margin:0!important;opacity:0!important;outline:none!important;padding:0!important;position:absolute!important;inset:0!important;transform:none!important;-webkit-appearance:none!important;z-index:-1!important}.assistive-text{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.internal-label-alignment--center{align-items:center}.internal-label-alignment--end{align-items:end}.internal-label--container{display:flex;justify-content:space-between;color:var(--calcite-color-text-1)}.internal-label-required--indicator{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-color-status-danger);padding-inline:var(--calcite-spacing-base)}.internal-label-required--indicator:hover{cursor:help}.internal-label--text{line-height:1}:host([scale=s]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-xxs)}:host([scale=s]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=s]) .internal-label--text{font-size:var(--calcite-font-size--2)}:host([scale=m]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-sm)}:host([scale=m]) .internal-label--text{font-size:var(--calcite-font-size--1)}:host([scale=l]) .internal-label-spacing--bottom{margin-block-end:var(--calcite-spacing-sm)}:host([scale=l]) .internal-label-spacing-inline--end{margin-inline-end:var(--calcite-spacing-md)}:host([scale=l]) .internal-label-spacing-inline--start{margin-inline-start:var(--calcite-spacing-md)}:host([scale=l]) .internal-label--text{font-size:var(--calcite-font-size-0)}:host([hidden]){display:none}[hidden]{display:none}`,n={assistiveText:"assistive-text",calendarWrapper:"calendar-wrapper",container:"container",dividerContainer:"divider-container",divider:"divider",inputContainer:"input-container",inputNoBottomBorder:"input--no-bottom-border",inputNoRightBorder:"input--no-right-border",inputNoTopBorder:"input--no-top-border",inputNoLeftBorder:"input--no-left-border",inputWrapper:"input-wrapper",input:"input",menu:"menu-container",toggleIcon:"toggle-icon",verticalChevronContainer:"vertical-chevron-container",chevronIcon:"chevron-icon"},he="calcite-input-date-picker",D={validationMessage:"inputDatePickerValidationMessage",dialog:p=>`date-picker-dialog--${p}`,placeholder:p=>`${he}-placeholder-${p}`},T={start:"start",end:"end"},m={calendar:"calendar",chevronDown:"chevron-down",chevronUp:"chevron-up"};function ge(p){if(!p)return!1;const{year:e}=P(p);return Number(e)<100}function me(p){const e=new Date().getFullYear();return Math.floor(e/100)*100+p}const k=class k extends z{constructor(){super(),this.commonDateSeparators=[".","-","/"],this.dialogId=D.dialog(V()),this.endInputRef=C(),this.focusOnOpen=!1,this.focusTrap=N({triggerProp:"open",focusTrapOptions:{onActivate:()=>{this.focusOnOpen&&(this.datePickerEl?.setFocus(),this.focusOnOpen=!1)},allowOutsideClick:!0,clickOutsideDeactivates:!1,initialFocus:!1,setReturnFocus:!1,onDeactivate:()=>{this.open=!1}}})(this),this.transitionProp="opacity",this.placeholderTextId=D.placeholder(V()),this.rangeStartValueChangedByUser=!1,this.startInputRef=C(),this.userChangedValue=!1,this._value="",this.valueAsDateChangedExternally=!1,this.messages=de({blocking:!0}),this.focusSetter=pe()(this),this.focusedInput="start",this.calendars=2,this.disabled=!1,this.focusTrapDisabled=!1,this.layout="horizontal",this.monthStyle="wide",this.open=!1,this.overlayPositioning="absolute",this.placement=M,this.proximitySelectionDisabled=!1,this.range=!1,this.readOnly=!1,this.required=!1,this.scale="m",this.status="idle",this.validity={valid:!1,badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1},this.calciteInputDatePickerBeforeClose=b({cancelable:!1}),this.calciteInputDatePickerBeforeOpen=b({cancelable:!1}),this.calciteInputDatePickerChange=b({cancelable:!1}),this.calciteInputDatePickerClose=b({cancelable:!1}),this.calciteInputDatePickerOpen=b({cancelable:!1}),this.listen("blur",this.blurHandler),this.listen("keydown",this.keyDownHandler),this.handleDateTimeFormatChange()}get value(){return this._value}set value(e){const t=e!==this._value,a=e===""&&(this.startInputRef.value?.value!==""||this.endInputRef.value?.value!=="");(t||a)&&(this._value=e,this.valueWatcher(e))}async reposition(e=!1){const{floatingEl:t,referenceEl:a,placement:i,overlayPositioning:r,filteredFlipPlacements:c}=this;return U(this,{floatingEl:t,referenceEl:a,overlayPositioning:r,placement:i,flipPlacements:c,type:"menu"},e)}async setFocus(e){return this.focusSetter(()=>this.el,e)}connectedCallback(){super.connectedCallback();const{open:e}=this;if(e&&this.openHandler(),this.min&&(this.minAsDate=l(this.min)),this.max&&(this.maxAsDate=l(this.max)),Array.isArray(this.value))this.valueAsDate=$(this.value);else if(this.value)try{const t=l(this.value),a=w(t,this.minAsDate,this.maxAsDate);this.valueAsDate=a}catch{this.warnAboutInvalidValue(this.value),this.value=""}else this.valueAsDate&&(this.range&&Array.isArray(this.valueAsDate)?this.value=[o(this.valueAsDate[0]),o(this.valueAsDate[1])]:!this.range&&!Array.isArray(this.valueAsDate)&&(this.value=o(this.valueAsDate)));X(this),j(this),this.setFilteredPlacements(),x.numberFormatOptions={numberingSystem:this.numberingSystem,locale:this.messages._lang,useGrouping:!1},I(this)}async load(){this.handleDateTimeFormatChange(),await this.loadLocaleData(),this.onMinChanged(this.min),this.onMaxChanged(this.max)}willUpdate(e){e.has("disabled")&&(this.hasUpdated||this.disabled!==!1)&&this.handleDisabledAndReadOnlyChange(this.disabled),e.has("readOnly")&&(this.hasUpdated||this.readOnly!==!1)&&this.handleDisabledAndReadOnlyChange(this.readOnly),e.has("valueAsDate")&&this.valueAsDateWatcher(this.valueAsDate),e.has("flipPlacements")&&this.flipPlacementsHandler(),e.has("min")&&this.onMinChanged(this.min),e.has("max")&&this.onMaxChanged(this.max),e.has("open")&&(this.hasUpdated||this.open!==!1)&&this.openHandler(),e.has("overlayPositioning")&&(this.hasUpdated||this.overlayPositioning!=="absolute")&&this.reposition(!0),(e.has("numberingSystem")||e.has("messages"))&&this.handleDateTimeFormatChange(),e.has("layout")&&(this.hasUpdated||this.layout!=="horizontal")&&this.setReferenceEl(),e.has("messages")&&this.loadLocaleData()}updated(){J(this)}loaded(){this.localizeInputValues(),I(this)}disconnectedCallback(){super.disconnectedCallback(),ee(this),G(this),q(this)}handleDisabledAndReadOnlyChange(e){e||(this.open=!1)}valueWatcher(e){if(!this.userChangedValue){let t;Array.isArray(e)?t=$(e):e?t=l(e):t=void 0,!this.valueAsDateChangedExternally&&t!==this.valueAsDate&&(this.valueAsDate=t),this.localizeInputValues()}this.userChangedValue=!1}valueAsDateWatcher(e){const t=Array.isArray(e)?[o(e[0]),o(e[1])]:o(e);this.datePickerActiveDate=Array.isArray(e)?e[0]:e,this.value!==t&&(this.valueAsDateChangedExternally=!0,this.value=t,this.valueAsDateChangedExternally=!1)}flipPlacementsHandler(){this.setFilteredPlacements(),this.reposition(!0)}onMinChanged(e){this.minAsDate=l(e)}onMaxChanged(e){this.maxAsDate=l(e)}openHandler(){re(this),!(this.disabled||this.readOnly)&&this.reposition(!0)}calciteInternalInputInputHandler(e){const t=e.target,a=t.value,i=this.parseNumerals(a),r=this.formatNumerals(i);t.value=r;const{year:c}=W(a,this.localeData);if(c&&c.length<4)return;const d=F(a,this.localeData);H(d,this.min,this.max)&&(this.datePickerActiveDate=d)}calciteInternalInputBlurHandler(){this.commitValue()}handleDateTimeFormatChange(){const e={numberingSystem:ae(this.numberingSystem)};this.dateTimeFormat=new Intl.DateTimeFormat(ie(ne(this.messages._lang)),e)}setReferenceEl(){const{focusedInput:e,layout:t,endWrapper:a,startWrapper:i}=this;this.referenceEl=e==="end"||t==="vertical"?a||i:i||a,requestAnimationFrame(()=>I(this))}onInputWrapperPointerDown(){this.currentOpenInput=this.focusedInput}onInputWrapperClick(e){const{range:t,endInputRef:a,startInputRef:i,currentOpenInput:r}=this,d=e.currentTarget.getAttribute("data-position");e.composedPath().find(f=>f.classList?.contains(n.toggleIcon))&&(d==="start"?i:a).value.setFocus(),(!t||!this.open||r===d)&&(this.open=!this.open)}setFilteredPlacements(){const{el:e,flipPlacements:t}=this;this.filteredFlipPlacements=t?Y(t,e):null}setTransitionEl(e){e&&(this.transitionEl=e)}onLabelClick(){this.setFocus()}onBeforeOpen(){this.calciteInputDatePickerBeforeOpen.emit()}onOpen(){this.focusTrap.activate(),this.calciteInputDatePickerOpen.emit()}onBeforeClose(){this.calciteInputDatePickerBeforeClose.emit()}onClose(){this.calciteInputDatePickerClose.emit(),_(this),this.focusTrap.deactivate(),this.focusOnOpen=!1,this.datePickerEl?.reset()}syncHiddenFormInput(e){oe("date",this,e)}blurHandler(){this.open=!1}commitValue(){const{focusedInput:e,value:t}=this,a=this.getInputRef(e),i=F(a.value.value,this.localeData),r=o(i),c=Array.isArray(t);if(this.range){const d=e==="start"?0:1;if(c){if(r===t[d])return;i?(this.setRangeValue([e==="start"?i:l(t[0]),e==="end"?i:l(t[1])]),this.localizeInputValues()):this.setRangeValue([e==="end"&&l(t[0]),e==="start"&&l(t[1])])}else i&&(this.setRangeValue([e==="start"?i:l(t[0]),e==="end"?i:l(t[1])]),this.localizeInputValues())}else{if(r===t)return;this.setValue(i),this.localizeInputValues()}}keyDownHandler(e){const{defaultPrevented:t,key:a}=e;if(t)return;const i=e.composedPath().some(r=>r.tagName==="CALCITE-SELECT");a==="Enter"?(e.preventDefault(),this.commitValue(),this.shouldFocusRangeEnd()?this.endInputRef.value?.setFocus():this.shouldFocusRangeStart()&&this.startInputRef.value?.setFocus(),K(this)&&this.restoreInputFocus(!0)):(a==="ArrowDown"||a==="ArrowUp")&&!i?(this.open=!0,this.focusOnOpen=!0,e.preventDefault()):this.open&&a==="Escape"&&(this.open=!1,e.preventDefault(),this.restoreInputFocus(!0))}startInputFocus(){this.focusedInput="start"}endInputFocus(){this.focusedInput="end"}setFloatingEl(e){this.floatingEl=e,I(this)}setStartWrapper(e){this.startWrapper=e,this.setReferenceEl()}setEndWrapper(e){this.endWrapper=e,this.setReferenceEl()}setDatePickerRef(e){e&&(this.datePickerEl=e,this.focusTrap.overrideFocusTrapEl(e))}async loadLocaleData(){x.numberFormatOptions={numberingSystem:this.numberingSystem,locale:this.messages._lang,useGrouping:!1},this.localeData=await se(this.messages._lang),this.localizeInputValues()}handleDateChange(e){this.range||(e.stopPropagation(),this.setValue(e.target.valueAsDate),this.localizeInputValues(),this.restoreInputFocus())}shouldFocusRangeStart(){const e=this.value[0];return!!(this.value[1]&&!e&&this.focusedInput==="end"&&this.startInputRef)}shouldFocusRangeEnd(){const e=this.value[0],t=this.value[1];return!!(e&&!t&&this.focusedInput==="start"&&this.endInputRef)}handleDateRangeChange(e){if(!this.range)return;e.stopPropagation();const t=e.target.valueAsDate;this.setRangeValue(t),this.localizeInputValues(),this.restoreInputFocus()}restoreInputFocus(e=!1){if(!this.range){this.startInputRef.value.setFocus(),this.open=!1;return}if(e){this.focusInput();return}this.rangeStartValueChangedByUser=this.focusedInput==="start",this.focusedInput="end",!(this.shouldFocusRangeStart()||this.rangeStartValueChangedByUser)&&(this.proximitySelectionDisabled&&this.valueAsDate[1]===null||(this.open=!1,this.focusInput()))}localizeInputValues(){const e=w(this.range?Array.isArray(this.valueAsDate)&&this.valueAsDate[0]||void 0:this.valueAsDate,this.minAsDate,this.maxAsDate),t=this.range?w(Array.isArray(this.valueAsDate)&&this.valueAsDate[1]||void 0,this.minAsDate,this.maxAsDate):null;this.setInputValue((e&&this.dateTimeFormat.format(e))??"","start"),this.setInputValue((this.range&&t&&this.dateTimeFormat.format(t))??"","end")}getInputRef(e="start"){return e==="start"?this.startInputRef:this.endInputRef}setInputValue(e,t="start"){const a=this.getInputRef(t);a.value&&(a.value.value=e)}setRangeValue(e){if(!this.range)return;const{value:t}=this,a=Array.isArray(t),i=Array.isArray(e),r=i?e[0]:null;let c=i?o(r):"";c&&(c=this.getNormalizedDate(c));const d=i?e[1]:null;let g=i?o(d):"";g&&(g=this.getNormalizedDate(g));const v=c||g?[c,g]:"";if(v===t)return;this.userChangedValue=!0,this.value=v,this.valueAsDate=v?$(v):void 0;const f=this.calciteInputDatePickerChange.emit();f&&f.defaultPrevented&&(this.value=t,a?(this.setInputValue(t[0],"start"),this.setInputValue(t[1],"end")):(this.value=t,this.setInputValue(t)))}setValue(e){if(this.range)return;const t=this.value;let a=o(e);if(a=this.getNormalizedDate(a),a===t)return;this.userChangedValue=!0,this.valueAsDate=a?l(a):void 0,this.value=a||"",this.calciteInputDatePickerChange.emit().defaultPrevented&&(this.value=t,this.setInputValue(t))}warnAboutInvalidValue(e){console.warn(`The specified value "${e}" does not conform to the required format, "YYYY-MM-DD".`)}formatNumerals(e){return e?e.split("").map(t=>this.commonDateSeparators?.includes(t)?this.localeData?.separator:O?.includes(t)?x?.numberFormatter?.format(Number(t)):t).join(""):""}parseNumerals(e){return e?e.split("").map(t=>O.includes(t)?x.delocalize(t):t).join(""):""}getNormalizedDate(e){if(!e)return"";if(!ge(e))return e;const{day:t,month:a,year:i}=P(e);return`${me(Number(i))}-${a}-${t}`}focusInput(){(this.focusedInput==="start"?this.startInputRef:this.endInputRef).value.setFocus()}render(){const{disabled:e,messages:{_lang:t},messages:a,numberingSystem:i,readOnly:r}=this;return x.numberFormatOptions={numberingSystem:i,locale:t,useGrouping:!1},Q({disabled:this.disabled,children:y`${this.labelText&&ce({labelText:this.labelText,onClick:this.onLabelClick,required:this.required,tooltipText:this.messages.required})||""}<div class=${s(n.container)}><div aria-label=${te(this)??u} .ariaRequired=${this.required} class=${s(n.inputContainer)} role=group><div class=${s(n.inputWrapper)} data-position=${T.start} @click=${this.onInputWrapperClick} @pointerdown=${this.onInputWrapperPointerDown} ${h(this.setStartWrapper)}><calcite-input-text aria-controls=${this.dialogId??u} aria-describedby=${this.placeholderTextId??u} aria-errormessage=${D.validationMessage} aria-autocomplete=none .ariaExpanded=${this.open} aria-haspopup=dialog .ariaInvalid=${this.status==="invalid"} class=${s({[n.input]:!0,[n.inputNoBottomBorder]:this.layout==="vertical"&&this.range,[n.inputNoRightBorder]:this.range})} .disabled=${e} .icon=${m.calendar} .label=${this.range?this.messages.startDate:this.messages.date} @calciteInputTextInput=${this.calciteInternalInputInputHandler} @calciteInternalInputTextBlur=${this.calciteInternalInputBlurHandler} @calciteInternalInputTextFocus=${this.startInputFocus} .placeholder=${this.localeData?.placeholder} .readOnly=${r} role=combobox .scale=${this.scale} .status=${this.status} ${h(this.startInputRef)}></calcite-input-text>${!this.readOnly&&!this.range&&this.renderToggleIcon(this.open&&this.focusedInput==="start")||""}<span aria-hidden=true class=${s(n.assistiveText)} id=${this.placeholderTextId??u}>${a.dateFormat.replace("{format}",this.localeData?.placeholder)}</span></div><div .ariaHidden=${!this.open} .ariaLabel=${a.chooseDate} aria-live=polite aria-modal=true class=${s(n.menu)} id=${this.dialogId??u} role=dialog ${h(this.setFloatingEl)}><div class=${s({[n.calendarWrapper]:!0,[S.animation]:!0,[S.animationActive]:this.open})} ${h(this.setTransitionEl)}><calcite-date-picker .activeDate=${this.datePickerActiveDate} .activeRange=${this.focusedInput} .calendars=${this.calendars} .headingLevel=${this.headingLevel} .layout=${this.layout} .max=${this.max} .maxAsDate=${this.maxAsDate} .messageOverrides=${this.messageOverrides} .min=${this.min} .minAsDate=${this.minAsDate} .monthStyle=${this.monthStyle} .numberingSystem=${i} @calciteDatePickerChange=${this.handleDateChange} @calciteDatePickerRangeChange=${this.handleDateRangeChange} .proximitySelectionDisabled=${this.proximitySelectionDisabled} .range=${this.range} .scale=${this.scale} tabindex=${(this.open?void 0:-1)??u} .valueAsDate=${this.valueAsDate} ${h(this.setDatePickerRef)}></calcite-date-picker></div></div>${this.range&&y`<div class=${s(n.dividerContainer)}><div class=${s(n.divider)}></div></div>`||""}${this.range&&y`<div class=${s(n.inputWrapper)} data-position=${T.end} @click=${this.onInputWrapperClick} @pointerdown=${this.onInputWrapperPointerDown} ${h(this.setEndWrapper)}><calcite-input-text aria-controls=${this.dialogId??u} aria-autocomplete=none .ariaExpanded=${this.open} aria-haspopup=dialog class=${s({[n.input]:!0,[n.inputNoTopBorder]:this.layout==="vertical"&&this.range,[n.inputNoLeftBorder]:this.layout==="horizontal"&&this.range,[n.inputNoRightBorder]:this.layout==="vertical"&&this.range})} .disabled=${e} .icon=${m.calendar} .label=${this.messages.endDate} @calciteInputTextInput=${this.calciteInternalInputInputHandler} @calciteInternalInputTextBlur=${this.calciteInternalInputBlurHandler} @calciteInternalInputTextFocus=${this.endInputFocus} .placeholder=${this.localeData?.placeholder} .readOnly=${r} role=combobox .scale=${this.scale} .status=${this.status} ${h(this.endInputRef)}></calcite-input-text>${!this.readOnly&&this.layout==="horizontal"&&this.renderToggleIcon(this.open)||""}</div>`||""}</div>${this.range&&this.layout==="vertical"&&y`<div class=${s(n.verticalChevronContainer)}><calcite-icon .icon=${this.open?m.chevronUp:m.chevronDown} .scale=${R(this.scale)}></calcite-icon></div>`||""}</div>${Z({component:this})}${this.validationMessage&&this.status==="invalid"?le({icon:this.validationIcon,id:D.validationMessage,message:this.validationMessage,scale:this.scale,status:this.status}):null}`})}renderToggleIcon(e){return y`<span class=${s(n.toggleIcon)} tabindex=-1><calcite-icon class=${s(n.chevronIcon)} .icon=${e?m.chevronUp:m.chevronDown} .scale=${R(this.scale)}></calcite-icon></span>`}};k.properties={datePickerActiveDate:[16,{},{state:!0}],focusedInput:[16,{},{state:!0}],localeData:[16,{},{state:!0}],calendars:[11,{},{type:Number,reflect:!0}],disabled:[7,{},{reflect:!0,type:Boolean}],flipPlacements:[0,{},{attribute:!1}],focusTrapDisabled:[7,{},{reflect:!0,type:Boolean}],form:[3,{},{reflect:!0}],headingLevel:[11,{},{type:Number,reflect:!0}],label:1,labelText:1,layout:[3,{},{reflect:!0}],max:[3,{},{reflect:!0}],maxAsDate:[0,{},{attribute:!1}],messageOverrides:[0,{},{attribute:!1}],min:[3,{},{reflect:!0}],minAsDate:[0,{},{attribute:!1}],monthStyle:1,name:[3,{},{reflect:!0}],numberingSystem:[3,{},{reflect:!0}],open:[7,{},{reflect:!0,type:Boolean}],overlayPositioning:[3,{},{reflect:!0}],placement:[3,{},{reflect:!0}],proximitySelectionDisabled:[5,{},{type:Boolean}],range:[7,{},{reflect:!0,type:Boolean}],readOnly:[7,{},{reflect:!0,type:Boolean}],required:[7,{},{reflect:!0,type:Boolean}],scale:[3,{},{reflect:!0}],status:[3,{},{reflect:!0}],validationIcon:[3,{converter:E},{reflect:!0}],validationMessage:1,validity:[0,{},{attribute:!1}],value:1,valueAsDate:[0,{},{attribute:!1}]},k.shadowRootOptions={mode:"open",delegatesFocus:!0},k.styles=ue;let A=k;L("calcite-input-date-picker",A);export{A as InputDatePicker};

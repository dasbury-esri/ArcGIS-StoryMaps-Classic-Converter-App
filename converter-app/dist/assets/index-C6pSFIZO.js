import{k as m,r as v,m as P,o as y,p as A,q as x,u as $,v as j}from"./index-CU2XrwSA.js";const N=e=>(...o)=>{const t=v(),s=new e(...o),n=s.exports;m(t.at(-1));const r=s.component.manager;r.W(s,n),s.watchExports(r.W.bind(r,s)),P(s);const a=[s.component,...t].reverse();return y(a,c=>c===void 0?void 0:z(s,c,n),n)},z=(e,{host:o,key:t,isReactive:s},n)=>{const r=o,a=r[t]!==e.exports,c=r[t]!==n,i=n!==e.exports;if(a&&!c&&i&&(r[t]=e.exports),o===e.component){if(s){const l=e.component.manager;c&&l.W(e,r[t]),e.onUpdate(h=>{if(h.has(t)){const b=r[t];b!==e.exports&&l.W(e,b)}})}e.O=s?void 0:t}const p=e.component.constructor.elementProperties.get(t)?.readOnly;e.watchExports(()=>{r[t]!==e.exports&&(p?A(()=>{r[t]=e.exports}):r[t]=e.exports)})},S=(e,o)=>{let t=e;for(;t;){if(t===o)return!0;if(!t.parentNode)return!1;t.parentNode instanceof ShadowRoot?t=t.parentNode.host:t=t.parentNode}return!1},T=(e,o,t)=>{const s=W(o).subscribe;return s(n=>{n.some(a=>S(e,a.target))&&t()})},f={},W=e=>{const o=e.join(","),t=f[o];if(t!==void 0)return t;const s=new Set,n=new MutationObserver(a=>s.forEach(c=>c(a)));globalThis.document&&n.observe(document.documentElement,{attributes:!0,attributeFilter:e,subtree:!0});const r={subscribe:a=>(s.add(a),()=>{s.delete(a),s.size===0&&(n.disconnect(),f[o]=void 0)})};return f[o]=r,r},_=(e,o)=>{let t=e;for(;t;){const s=t.closest?.(o);if(s)return s;const n=t.getRootNode?.();if(n===globalThis.document)return;t=n.host}},M=(e,o,t)=>_(e,`[${o}]`)?.getAttribute(o)??t,U="ar,bg,bs,ca,cs,da,de,el,en,es,et,fi,fr,he,hr,hu,id,it,ja,ko,lt,lv,nl,nb,no,pl,pt-BR,pt-PT,ro,ru,sk,sl,sr,sv,th,tr,uk,vi,zh-CN,zh-HK,zh-TW".split(","),V=new Set(U),d="en",q={pt:"pt-PT",nb:"no",nn:"no",zh:"zh-CN"},B=async(e,o,t="")=>{const s=`${o}/${t}`,n=`${s}${e}.json`;return g[n]??(g[n]=C(e,s)),await g[n]},g={},C=async(e,o)=>{const t=`${o}${e}.json`;try{const s=await fetch(t);if(s.ok)return await s.json()}catch(s){return console.error(s),{}}return e===d?{}:await C(d,o)},E=e=>{const o=M(e,"lang",globalThis.navigator?.language||d);return{lang:o,t9nLocale:L(o)}},L=e=>{const[o,t]=e.split("-"),s=o.toLowerCase();let n=s;return t&&(n=`${s}-${t.toUpperCase()}`),n=q[n]??n,V.has(n)?n:t?L(s):d},F=(e,o,t,s)=>{let n;const r=()=>H(e,o(),s).then(a=>{(n?.lang!==a.lang||n.t9nLocale!==a.t9nLocale||n.t9nStrings!==a.t9nStrings)&&t(a),n=a}).catch(console.error);return queueMicrotask(r),T(e,["lang"],r)},H=async(e,o,t=e.localName.split("-").slice(1).join("-"))=>{const{lang:s,t9nLocale:n}=E(e),r=`${o}/${t}/t9n`,c=t===null?{}:await B(n,r,"messages.");return{lang:s,t9nLocale:n,t9nStrings:c}},K=e=>O(void 0,e),I=e=>o=>O(o,e);class R extends x{constructor(o,t){super(o);const s=this.exports;try{$(this.component);const n=t(this.component,this),r=this.exports!==s;if(j(n)){r||this.setProvisionalExports(n);const a=n.then(c=>{this.exports=c,super.catchUpLifecycle()}).catch(c=>{this.P.reject(c),console.error(c)});this.onLoad(async()=>await a)}else(!r||n!==void 0)&&(this.exports=n),queueMicrotask(()=>super.catchUpLifecycle())}catch(n){this.P.reject(n),console.error(n)}}catchUpLifecycle(){}}const O=N(R),J=(e,o)=>new D(e,o);class D extends x{#t;#e;#s;constructor(o,t){super(),this.#e=o,this.#s=t,this.#t=new MutationObserver(s=>{s.forEach(n=>{o.includes(n.attributeName)&&t.call(this.component,this.component.el.getAttribute(n.attributeName),n.oldValue,n.attributeName)})})}hostConnected(){this.#e.forEach(o=>{this.component.el.hasAttribute(o)&&this.#s.call(this.component,null,this.component.el.getAttribute(o),o)}),this.#t.observe(this.component.el,{attributes:!0,attributeOldValue:!0,attributeFilter:this.#e})}hostDisconnected(){this.#t.disconnect()}}const Q=e=>(...o)=>{const t=v(),s=new e(...o);return m(t.at(-1)),s},X=e=>(o={})=>K((t,s)=>{const n=E(t.el),r={_lang:n.lang,_t9nLocale:n.t9nLocale,_loading:!0},a=t;s.onLifecycle(()=>F(t.el,()=>e("./assets"),({t9nLocale:i,t9nStrings:u,lang:p})=>{const l={...u,_lang:p,_t9nLocale:i,_loading:!1};s.exports=l;const h=u.componentLabel;typeof h=="string"&&"label"in t&&t.label==null&&(t.label??=h),c(a.messageOverrides)},o.name));const c=i=>{const u=s.exports,p=u._original??u,l=w(p,i);i&&(l._original=p),s.exports=l};return"messageOverrides"in a&&s.onUpdate(i=>{i.has("messageOverrides")&&c(a.messageOverrides)}),o.blocking?(s.setProvisionalExports(r,!1),s.ready):r}),w=(e,o)=>{if(!o)return e;const t={...e};return Object.entries(o).forEach(([s,n])=>{typeof n=="object"?t[s]=w(e[s],n):t[s]=n??e[s]}),t};export{X as a,I as m,Q as t,J as u};
